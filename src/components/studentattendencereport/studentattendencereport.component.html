<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Attendance Report</title>
</head>
<body>
  <div class="entire-div">
    <mat-card class="attendance-report-card">
      <h2>Attendance Summary</h2>
    
      <div *ngIf="isLoading">
        <p>Loading attendance data...</p>
      </div>
    
      <div *ngIf="!isLoading">
        <!-- Attendance List and Pie Charts -->
        <div *ngIf="attendanceSummary && attendanceSummary.length > 0; else noData">
          <div class="charts-container">
            <div *ngFor="let item of attendanceSummary; let i = index" class="teacher-attendance">
              <h3>Teacher ID: {{ item.teacherId }}</h3>
              
              <!-- Pie Chart for Each Teacher -->
              <div class="chart-container">
                <canvas id="attendanceChart{{i}}" width="200" height="200"></canvas>
              </div>
              
              <p><strong>Status:</strong> {{ item.status }}</p>
              <p><strong>Attendance Percentage:</strong> {{ item.attendancePercentage }}%</p>
            </div>
          </div>
        </div>
    
        <!-- No Data Message -->
        <ng-template #noData>
          <p>No attendance records available.</p>
        </ng-template>
      </div>
    </mat-card>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
